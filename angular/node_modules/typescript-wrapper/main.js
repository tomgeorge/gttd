
var fs = require('fs'),
	version = '0.8.x';

(function() {
	
	var tempFilename = 'typescript-generated-20121007-' + version + '.tmp',
		targetFile = __dirname + '/lib/'+tempFilename;
	
	if(!fs.existsSync(targetFile)) {		
		var srcFile = __dirname + '/lib/typescript.js';
		
		//expose the typescript compiler ...
		var content = "(function() { \n";
		content += fs.readFileSync(srcFile, 'utf8');
		content += "\n\n";
		
		content += "module.exports = TypeScript;\n\n";		
		content += "})();\n";
		
		fs.writeFileSync(targetFile, content, 'utf8'); 
	}
	
	
	
	module.exports = require(targetFile);
	module.exports._libdPath = __dirname + '/lib/lib.d.ts';
	
	
})();

